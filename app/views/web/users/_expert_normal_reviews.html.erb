
<div class="tab-pane fade show active tab-3" id="nav-name" role="tabpanel">
    <% if @reviews_normal.blank? %>
    <p>No Record Found</p>
    <%else%>
    <div class="home-slider1">
        <%  @reviews_normal&.each  do |user_reviews|%>
        <% if user_reviews.present?%>
        <%@a = User.find_by(id: user_reviews.user_id) %>
        <div class="slide-item ">
            <div class="score-card">
                <div class="score-card-top">
                    <div class="rtUserImg">
                        <img src="<%= @a&.image&.file&.present? ? @a&.image&.file.try(:url) : "/assets/user_default.jpeg"%>"> </div> <div class="rtUserInfo">
                        <div class="name-date">
                            <h4>
                                <%= @a&.name%>
                            </h4>
                            <span>
                                <%=user_reviews.created_at.strftime("%B %d, %Y")%>
                            </span><br>

                            Product Name : <%=  Product.find(user_reviews.product_id).product_name%>
                        </div>
                        <div class="score-rating">
                            <%= user_reviews&.rating.to_i == 10 ? "10" : "0#{user_reviews&.rating}"%>/10
                            
                            <% if user_reviews&.criteria.present?%>
                            <% i=0 %>
                            <% eval(user_reviews.criteria).map do |key,value| %>
                             <p>
                                 <%if i <= 2 %>
                                 <% i=i+1 %>
                                <%=key%>:
                                <% if value > 0 %>
                                <% value.times do %>
                                <span class="fa fa-star checked"></span>
                                <% end %>
                            </p>
                            <%else%>
                            N/A
                            <%end%>
                            <% end %>
                            <% end %>
                            <%#= user_reviews&.product&.category_name%>
                           <%end %>
                        </div>
                    </div>
                </div>
                <div class="ratingText">
                    <%#=truncate(user_reviews&.comment)%>
                    <%=truncate(strip_tags(user_reviews&.comment), omision: "...", length: 100)&.html_safe%>
                    <%#= truncate(strip_tags(user_reviews&.comment), length: 130).html_safe%>
                    <%if user_reviews&.comment.present? && user_reviews&.comment&.length > 100 || i >= 3 %>
                    <a href="<%=read_full_review_web_users_path(id: user_reviews&.id)%>">Read Full Review</a>
                    <%end%>
                </div>
                <div class="d-flex justify-content-end">
                    <% if current_user&.present? %>
                    <div class="like-dislike">
                        <span>
                            <img style="width:25px" src='<%= review_vote_status(user_reviews.id)  ? "/assets/like_active.png" : "/assets/Facebook_like_thumb.png"%>' class="vote_ajax" id="like_<%=user_reviews.id%>" alt="" onclick="voting(this)">
                            <%= voting_like_count(user_reviews)%></span>
                        <span><img style="width:25px" src='<%= review_vote_status_dislike(user_reviews.id)  ? "/assets/facebook_not_like_thumbs_down.png"  : "/assets/dislike_active.png" %>' class="vote_ajax" id="dislike_<%=user_reviews.id%>" alt="" onclick="voting(this)">
                            <%= voting_dislike_count(user_reviews)%></span>
                    </div>
                    <%end%>
                </div>
            </div>
        </div>
        <%end%>
        <%end%>
        <%end%>
    </div>
</div>
<div class="tab-pane fade tab-3 " id="nav-metascore" role="tabpanel">
    <% if @review_expert.blank? %>
    <p>No Record Found</p>
    <%else%>
    <div class="home-slider1">
        <% @review_expert&.each  do |user_reviews|%>
        <% if user_reviews.present?%>
        <% @a = User.find_by(id: user_reviews.user_id) %>
        <div class="slide-item">
            <div class="score-card">
                <div class="score-card-top">
                    <div class="rtUserImg">
                        <img src="<%= @a&.image&.file&.present? ? @a&.image&.file.try(:url) : "/assets/user_default.jpeg"%>"> </div> <div class="rtUserInfo">
                        <div class="name-date">
                            <h4>
                                <%= User.find_by(id: user_reviews.user_id).name%>
                            </h4>
                            <span>
                                <%=user_reviews.created_at.strftime("%B %d, %Y")%></span>
                        </div>
                        <div class="score-rating">
                            <%= user_reviews&.rating.to_i == 10 ? "10" : "0#{user_reviews&.rating}"%>/10
                            <% if user_reviews&.criteria.present?%>
                            <% i=0 %>
                            <% eval(user_reviews.criteria).map do |key,value| %>
                            <p>
                                <% if i<=2 %>
                                <% i=i+1 %> 
                                <%=key%>:
                                <% if value > 0 %>
                                <% value.times do %>
                                <span class="fa fa-star checked"></span>
                                <% end %>
                            </p>
                            <%else%>
                            N/A
                            <%end%>
                            <%end %>
                            <% end %>
                             <%#= user_reviews.criteria.split(",") %>
                            <% end %>
                        </div>
                    </div>
                </div>
                <div class="ratingText">
                    <%#=truncate(user_reviews&.comment)%>
                    <%=truncate(strip_tags(user_reviews&.comment), omision: "...", length: 100)&.html_safe%>
                    <%#= truncate(strip_tags(user_reviews&.comment), length: 130).html_safe %>
                    <%if user_reviews&.comment.present? && user_reviews&.comment&.length > 100 || i>=3 %>
                    <a href="<%=read_full_review_web_users_path(id: user_reviews&.id)%>">Read Full Review</a>
                    <%end%>
                </div>
                <div class="d-flex justify-content-end">
                    <%if current_user.present?%>
                    <div class="like-dislike">
                       <span> <img style="width:25px" src='<%= review_vote_status(user_reviews.id)  ? "/assets/like_active.png" : "/assets/Facebook_like_thumb.png"%>' class="vote_ajax" id="like_<%=user_reviews.id%>" alt="" onclick="voting(this)">
                        <%= voting_like_count(user_reviews)%></span>
                        <span><img style="width:25px" src='<%= review_vote_status_dislike(user_reviews.id)  ? "/assets/facebook_not_like_thumbs_down.png"  : "/assets/dislike_active.png" %>' class="vote_ajax" id="dislike_<%=user_reviews.id%>" alt="" onclick="voting(this)">
                            <%= voting_dislike_count(user_reviews)%></span>
                    </div>
                    <%end%>
                </div>
            </div>
        </div>
        <%end%>
        <%end%>
        <%end%>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function() {
    $(".ratingText").shorten({
        "showChars": 500,
        "moreText": "Read Full Review",
        "lessText": "Less",
    });
});
</script>
<script type="text/javascript">
function voting(a) {
    var current_object = a;
    var data = a.id.split("_");
    var review_status = data[0];
    var review_id = data[1];

    $.ajax({
        url: '/web/reviews/get_vote_for_review',
        type: 'post',
        data: {
            id: review_id,
            status: review_status
        },

        success: function(result) {
            // alert(result);
            // alert(current_object);
            var parent = current_object.parentElement;
            if (result.status == true) {
                parent.parentElement.innerHTML = '<span><img style="width:25px" src="/assets/like_active.png" class="vote_ajax" id="like_' + review_id + '" alt="" onclick="voting(this)" >' + result.like_count + '</span> <span><img style="width:25px" src="/assets/facebook_not_like_thumbs_down.png" class="vote_ajax" id="dislike_' + review_id + '" alt="" onclick="voting(this)" >' + result.dislike_count + '</span>'
            } else {
                parent.parentElement.innerHTML = '<span><img style="width:25px" src="/assets/Facebook_like_thumb.png" class="vote_ajax" id="like_' + review_id + '" alt="" onclick="voting(this)" >' + result.like_count + '</span> <span><img style="width:25px" src="/assets/dislike_active.png" class="vote_ajax" id="dislike_' + review_id + '" alt="" onclick="voting(this)">' + result.dislike_count + '</span>'
            }
        }

    });
}
</script>
<!-- <script>
// $(document).ready(function() {
$(document).on("turbolinks:load",function(){
    $('[data-toggle="popover"]').popover();
});
</script>
<style type="text/css">
.reviewTab {
    padding-top: 30px;
}
.reviewTab.tab-content>.tab-pane {
    display: block;
    overflow: hidden;
}
.reviewTab .tab-pane {
    padding: 0px;
}
.slick-prev,
.slick-next{
    font-size: 0;
    line-height: 0;
    position: absolute;
    top: 50%;
    display: block;
    width: 20px;
    height: 20px;
    padding: 0;
    -webkit-transform: translate(0, -50%);
    -ms-transform: translate(0, -50%);
    transform: translate(0, -50%);
    cursor: pointer;
    color: transparent;
    border: none;
    outline: none;
    background: transparent;
    z-index: 9;
}
.slick-prev:hover,
.slick-prev:focus,
.slick-next:hover,
.slick-next:focus{
    color: transparent;
    outline: none;
    background: transparent;
}
.slick-prev:hover:before,
.slick-prev:focus:before,
.slick-next:hover:before,
.slick-next:focus:before{
    opacity: 1;
}
.slick-prev.slick-disabled:before,
.slick-next.slick-disabled:before{
    opacity: .25;
}

.slick-prev:before,
.slick-next:before{
    font-family: 'slick';
    font-size: 20px;
    line-height: 1;
    opacity: .75;
    color: white;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.slick-prev{
    left: 25px;
}
[dir='rtl'] .slick-prev{
    right: 25px;
    left: auto;
}
.slick-prev:before{
    content: '←';
}
[dir='rtl'] .slick-prev:before{
    content: '→';
}

.slick-next{
    right: 25px;
}
[dir='rtl'] .slick-next{
    right: auto;
    left: 25px;
}
.slick-next:before{
    content: '→';
}
[dir='rtl'] .slick-next:before{
    content: '←';
}

/* Dots */
.slick-dotted.slick-slider {
    margin-bottom: 30px;
}

.slick-dots {
    position: absolute;
    bottom: 20px;
    display: block;
    width: 100%;
    padding: 0;
    margin: 0;
    list-style: none;
    text-align: center;
}
.slick-dots li {
    position: relative;
    display: inline-block;
    width: 17px;
    height: 17px;
    margin: 0 5px;
    padding: 0;
    cursor: pointer;
}
.slick-dots li button {
    font-size: 0;
    line-height: 0;
    display: block;
    width: 17px;
    height: 17px;
    padding: 5px;
    cursor: pointer;
    color: transparent;
    border: 0;
    outline: none;
    background: transparent;
    border: 2px solid #fff;
    border-radius: 50%;
    box-sizing: border-box;
}
.slick-dots li button:hover,
.slick-dots li button:focus {
    outline: none;
}
.slick-dots li.slick-active button {
    background: #ff6b1b;
    border-color: #ff6b1b;
}
 
.slick-dots1 li button {
    font-size: 0;
    line-height: 0;
    display: block;
    width: 17px;
    height: 17px;
    padding: 5px;
    cursor: pointer;
    color: transparent;
    border: 0;
    outline: none;
    background: #ff6b1b;
    border: 2px solid #fff;
    border-radius: 50%;
    box-sizing: border-box;
}
.home-slider1 .slide-item {
    /*box-shadow: 0px 0px 6px 0px rgba(0, 0, 0, 0.25);*/
    padding: 6px;
}
.home-slider1 .slide-item .score-card {
    margin-bottom: 0px;
    min-height: 333px;
}
.home-slider1 .slide-item .score-card-top {
    justify-content: flex-start;
}
.ratingText {
    min-height: 88px;
    margin-bottom: 15px;
}
.rtUserImg {
    overflow: hidden;
    margin-right: 15px;
}
.rtUserImg img {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    border: 2px solid #d1cfd2;
}
.date1{
    color: #f17344;
    font-size: 22px;
    font-weight: 500;
}
.home-slider1 ul.slick-dots {
    display: inline-block;
    max-width: 130px;
    right: 0px;
    z-index: 9;
    bottom: -60px;
}
.home-slider1 ul.slick-dots li {
    border: 1px solid #868686;
    border-radius: 50%;
    width: 19px;
    height: 19px;
}

.profil-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 50px;
}
.user-profile {
    text-align: center;
}
.user-profile img {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    margin-bottom: 20px;
}
.user-detail {
    display: flex;
    justify-content: space-between;
    min-width: 70%;
}
.user-detail .btn {
    margin-top: 20px;
}
.ratings, .reviews {
    text-align: center;
    width: 150px;
}
.ratings h3, .reviews h3 {
    font-size: 50px;
    color: #4d4d4d;
    background: #f1f1f1;
    width: 140px;
    height: 140px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}
.ratings span, .reviews span {
    font-size: 14px;
    color: #3c4043;
    text-align: center;
}
.myscore-row .main-title {
    text-align: left;
    font-size: 30px;
}
.myscore-row .main-title:after {
    margin: 5px 0 0 0;
}
.tab-pane {
    padding: 30px 0px 0px 0px;
}
.nav-tabs {
    border-bottom: 0;
}
.nav-pills .nav-link {
    border-radius: 0;
    border: 0px;
    background: #dbd6d6;
    color: #424242;
    margin-bottom: 0px;
    -webkit-clip-path: polygon(2px 216px,336px 217px,278px -2px,0px 0px);
    clip-path: polygon(2px 216px,336px 217px,278px -2px,0px 0px);
}
.nav-pills .nav-link.active, .nav-pills .show>.nav-link {
    color: #fff;
    background-color: #fe7100;
}
.score-card {
    padding: 20px 15px;
    box-shadow: 0px 0px 6px 0px rgba(0, 0, 0, 0.25);
    font-family: 'Poppins', sans-serif;
    margin-bottom: 30px;
}
.score-card-top {
    display: flex;
    align-items: center;
/*    justify-content: space-between;*/
    margin-bottom: 18px;
}
.name-date h4 {
    font-size: 25px;
    font-weight: 600;
    margin-bottom: 5px;
}
.name-date span {
    font-size: 12px;
    color: #6e6e6e;
}
.score-card p {
   font-size: 12px;
    margin-bottom: auto;
}
.score-rating {
    font-size: 25px;
    font-weight: 600;
    color: #fe7100;
}
.like-dislike {
    display: flex;
    align-items: center;
}
.like-dislike span {
    font-size: 16px;
    color: #6e6e6e;
    margin-right: 10px;
}
.like-dislike span img{
    margin-right: 5px;
}
.text-underline {
    text-decoration: underline;
}
.more_text {
    display: none;
}
.more_text.show {
    display: inline;
}
</style> -->