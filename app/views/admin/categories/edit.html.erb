<div class="login-part">
  <div class="clearfix">
    <div class="global-heading user-head">Category Management</div>
    <div class="aduser-btn"><a href="/admin/categories" class="btn btn-add"> << Back to list </a></div>
  </div>
  <div class="country-manage-tab">
    <div class="tab-section">
      <ul class="nav nav-tabs">
        <li><a class="active" data-toggle="tab" href="#category">Category</a></li>
        <li><a data-toggle="tab" href="#state" class="state-tab">Sub Category</a></li>
      </ul>
      <%= form_for :category, url: admin_category_path, method: :patch, html:  {id: "admin_edit_category"}  do |f| %>
      <div class="tab-content">
        <div id="category" class="tab-pane fade in active">
          <div class="country-tab">
            <div class="country_mng-form">
                <div class="form-group">
                  <label for="">Category Name<span class="required">*</span> </label>
                  <%= f.text_field :category_name, :class => 'select-dropdown form-control' %>
                </div>
         
                <div class="form-group">
                 
                 <!--  <div class="form-add">
                    <%#= submit_tag 'Submit', :class => "btn btn-primary btn-md"%>
                  </div> -->
              <div class=""><button class="btn btn-success" type="submit">Submit</button>
              <a href="/admin/categories" class="btn btn-add btn-danger btn-md "> << Back to list </a></div>
                 
                </div>
              </div>
            </div>
          </div>
        <%end%>
        <div id="state" class="tab-pane in fade">
          <button class="btn btn-primary btn-md pull-right" type="button" data-toggle="modal" data-target="#myModal" id="states" style="margin-right: 1px;">Add Sub Category</button>
          <br>
          <div class="state-tab">

             <div class="clearfix box box-primary">
        <fieldset class="global-fieldset">
        <legend>Filter</legend>
        <div class="filter-form">
        <!-- <form action="/admin/users" method="get" accept-charset="UTF-8" enctype="multipart/form-data" id="web-user-val" class="form-common clearfix"> -->
         <%= form_tag "/admin/categories/search_sub_categories", method: :get,  class:"form-common clearfix" do  %>
          <div class="col-sm-3">
            <div class="form-group">
              <label>NAME</label>
              <!-- <input type="text" class="form-control custom-control " name="user_name"> -->
              <input type="text" name="search" class="form-control custom-control" placeholder="SEARCH CATEGORY" id="country_serch">
            </div>
          </div>
          <div class="col-sm-3">
            <div class="filter-btn">
              <button class="btn btn-primary"> <i class="fa fa-search"></i> Filter </button>
              <a href="/admin/categories" class="btn btn-danger">Cancle</a>
              
            </div>
          </div>
        <!-- </form> -->
        <%end%>
      </div>
    </fieldset>
      </div>
            <!-- <div class="form-add">
              <button class="btn btn-primary btn-md" type="button" data-toggle="modal" data-target="#myModal" id="states">Add Sub Category</button>
            </div> -->
            <div class="table-responsive cus-table">
              <table class="table table-bordered table">
                <thead>
                <%#binding.pry%>
                  <tr>
                    <th>S.No.</th>
                    <th>Sub Category</th>
                    <th colspan="3">Actions</th>
                  </tr>
                </thead>
                <% @sub_category&.each do |m| %>
                  <tbody>
                    <tr>
                      <td><%= @s_no += 1 %></td>
                      <td><%= m.try(:sub_category_name)%></td>
                     

                      <!-- <td></td> -->
                  <td><div class="form-add" style="display:inline-block;">
             <button class="btn btn-primary btn-md state11" type="button" data-toggle="modal" data-target="#editModal" id="<%=m.id%>">Edit</button> 
              <%= link_to 'Delete', destroy_sub_category_admin_categories_path(id: m.id),:data => {:confirm => "Are you sure you want to delete this country ?"},:class=>"btn btn-danger", method: :delete %></td>

            <%#=link_to  edit_state_admin_countries_path, :class=> "btn btn-primary btn-md", :id => "states1", target:"editModal", toggle: "modal" %>
             
      <!-- <div class="modal fade in add-modal" id="editModal" role="dialog">
    <div class="modal-dialog">
     -->
      <!-- Modal content-->

      
 <!--    </div>
  </div> -->
            </div> 
           <%#= link_to 'Delete', destroy_state_admin_countries_path(id: m.id),:data => {:confirm => "Are you sure you want to delete this state ?"},:class=>"btn btn-danger", method: :delete %>
          </td>
                    </tr>
                  </tbody>
                <%end%>
              </table>
            </div>
          </div>
        </div>  
      </div>
    </div>
  </div>
</div>
 <!-- Modal -->
  <div class="modal fade in add-modal" id="myModal" role="dialog">
    <div class="modal-dialog">
     
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
       
        </div>
        <div class="modal-body">
          <div class="addbody">
           <%= form_for :sub_categories, url:  create_sub_category_admin_categories_path  do |f| %>


                 <div class="form-group">
                <label for="">Sub Category Name<span class="required">*</span> </label>
                   <%= f.text_field :sub_category_name, class: "form-control custom-control",  placeholder: "Sub Category Name"%>

              </div>
            
              <%= f.hidden_field :category_id, :value => params[:id] %>
           
                </div>
        </div>
        <div class="modal-footer text-center">
          <%= submit_tag 'Submit', :class => "btn btn-primary btn-md"%>
        </div>
        <%end%>
      </div>
      
    </div>
  </div>

   <div class="modal fade in add-modal" id="editModal" role="dialog">
    <div class="modal-dialog">
    <div id="sub_modal_view">
    </div>
      <!-- Modal content-->
    </div>
  </div>

  <script>
$(document).ready(function() {
     $("#admin_edit_category").validate({
    rules: {
      "country[country_name]": {
        required: true,
        maxlength: 35
      }
    messages: {
      "country[country_name]":{
        required: "Please enter the country name.",
        maxlength: "Maximum characters are 35."
      }
    },
    submitHandler: function(form) {
      form.submit();
    }
   });
$.validator.addMethod("regxfloat", function(value, element, regexpr) {          
    return regexpr.test(value);
}, "Invalid Format");
   
   $.validator.addMethod('lessThanEqual', function(value, element, param) {
    if (this.optional(element)) return true;
    var i = parseInt(value);
    // var j = parseInt($(param).val());
    return i <= 100;
}, "The value must be less than or equal to {100}.");

});

</script>



<script>
$('.state11').click(function(){
   var state1 = this.id;
   //alert(state1);
    $.ajax({
                type: "post",
                url: "/admin/categories/edit_sub_category",
                datascript: "js",
                data: {
                  id: state1

                }

              });
});
</script>
 
