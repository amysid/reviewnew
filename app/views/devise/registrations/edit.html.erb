<!-- <h2>Edit <%#= resource_name.to_s.humanize %></h2>

<%#= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
  <%#= render "devise/shared/error_messages", resource: resource %>

 <label for="file-upload" class="custom-file-upload ">

  <%#= f.fields_for :image_attributes do |m| %>
   <img src='<%#= current_user&.image&.file&.present? ? current_user&.image&.file.try(:url) : "/assets/user_no_image.png" %>' class="img-circle" alt="Image Not Found" id="user_pic"  onchange = "preview(this)" height=150px width=150px /><i class="fa fa-camera" style="position: absolute; margin-top: 47px; margin-left: -45px; font-size: 24px;" ></i>

  <%#= m.file_field :file, onchange: "preview(this)" , accept: "image/*" , style: "display:none" , id: "file-upload"%>
  <%#end%>
  </label>

 <div class="field">
    <%#= f.label :name %><br />
    <%#= f.text_field :name %>
  </div>
  <div class="field">
    <%#= f.label :email %><br />
    <%#= f.email_field :email, autofocus: true, autocomplete: "email" %>
  </div>

  <%# if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
    <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
  <% #end %>

  <div class="field">
    <%#= f.label :password %> <i>(leave blank if you don't want to change it)</i><br />
    <%#= f.password_field :password, autocomplete: "new-password" %>
    <% #if @minimum_password_length %>
      <br />
      <em><%= @minimum_password_length %> characters minimum</em>
    <%#end %>
  </div>

  <div class="field">
    <%#= f.label :password_confirmation %><br />
    <%#= f.password_field :password_confirmation, autocomplete: "new-password" %>
  </div>

  <div class="field">
    <%#= f.label :current_password %> <i>(we need your current password to confirm your changes)</i><br />
    <%#= f.password_field :current_password, autocomplete: "current-password" %>
  </div>

  <div class="actions">
    <%#= f.submit "Update" %>
  </div>
<%# end %>

<h3>Cancel my account</h3>

<p>Unhappy? <%#= button_to "Cancel my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete %></p>

<%#= link_to "Back", :back %>




<script type="text/javascript">
  function preview(input) {
           if (input.files && input.files[0]) {
               var reader = new FileReader();
                 reader.onload = function (e) {
                   $('#user_pic')
                       .attr('src', e.target.result);
               };

               reader.readAsDataURL(input.files[0]);
           }
       }
</script>
 -->

<script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"></script>
 <div class="page-wrapper">
      <div class="container home-wrap">
        <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put, :id => "update_form" }) do |f| %>
        <div class="profil-row">
          <div class="user-profile">
            <div class="img-container">
              <label for="file-upload" class="custom-file-upload ">
               <% if current_user&.image&.file&.present? %> 
                <%= f.fields_for :image do |m| %>
                   <img src='<%= current_user&.image&.file&.present? ? current_user&.image&.file.try(:url) : "/assets/user_no_image.png" %>' class="img-circle" alt="Image Not Found" id="user_pic"  onchange = "preview(this)" height=150px width=150px /><i class="fa fa-camera" style="position: absolute; margin-top: 30px; margin-left: -20px; font-size: 24px;" ></i>
                 <%= m.file_field :file, onchange: "preview(this)" , accept: "image/*" , style: "display:none" , id: "file-upload"%>
                 <%end%>
                <%else%>
                       <%= f.fields_for :image_attributes do |m| %>
                   <img src='<%= current_user&.image&.file&.present? ? current_user&.image&.file.try(:url) : "/assets/user_no_image.png" %>' class="img-circle" alt="Image Not Found" id="user_pic"  onchange = "preview(this)" height=150px width=150px /><i class="fa fa-camera" style="position: absolute; margin-top: 30px; margin-left: -20px; font-size: 24px;" ></i>
                 <%= m.file_field :file, onchange: "preview(this)" , accept: "image/*" , style: "display:none" , id: "file-upload"%>
                 <%end%>
                <%end%>
              </label>
            </div>
            <h4><%#= current_user.name   %></h4>
          </div>
          <div class="user-detail">
            <div class="ratings">
              <h3 class="">57</h3>
              <span>Ratings</span>
            </div>
            <div class="reviews">
              <h3 class="">57</h3>
              <span>Reviews</span>
            </div>
            <div class="profil-btn">
              <%= link_to "Back", user_profile_web_user_path(current_user), class: "btn btn-theme" %>
              <!-- <button class="btn btn-theme">Account Settings</button> -->
            </div>
          </div>
        </div>
        
        <div class="myscore-row">
          <h2 class="main-title">Change Password</h2>
          <div class="form form-changepassword">
            <div class="form-group">
              <!-- <input type="password" class="form-control" placeholder="Old Password"> -->
              <%= f.password_field :current_password, placeholder: "Old Password", class: "form-control" %>
            </div>
            <div class="form-group">
              <!-- <input type="password" class="form-control" placeholder="New Password"> -->
              <%= f.password_field :password, autocomplete: "new-password", class: "form-control", placeholder: "New Password" %>
            </div>
            <div class="form-group">
              <!-- <input type="password" class="form-control" placeholder="Confirm Password"> -->
               <%= f.password_field :password_confirmation, autocomplete: "new-password", class: "form-control", placeholder: "Confirm Password" %>
            </div>
            <div class="form-group">
              <!-- <button class="btn btn-theme btn-block">Save</button> -->
              <%= f.submit "Save", class: "btn btn-theme btn-block" %>
            </div>
          </div>
        </div>
        <%end%>
      </div>
    </div>
  </div>
<script type="text/javascript">
  $(document).ready(function () {
      $(".show_hide").click(function () {
        var elem = $(".show_hide").text();
        if (elem == "Read Full Review") {
          //Stuff to do when btn is in the read more state
          $(".show_hide").text("View Less");
          $(".more_text").addClass('show');
        } else {
          //Stuff to do when btn is in the read less state
          $(".show_hide").text("Read Full Review");
          $(".more_text").removeClass('show');
        }
      });
    });
</script>
<script type="text/javascript">
$(document).ready(function(){
$("#update_form").validate({
    rules: {
      "user[current_password]":{
        required: true,
        minlength: 8,
        maxlength: 16
      },
      "user[password]":{
        //required: true,
        minlength: 8,
        maxlength: 16
      },
      "user[password_confirmation]":{
        //required: true,
        equalTo: "#user_password",
        minlength: 8,
        maxlength: 16
      }
    }   
  });
  });

function preview(input) {
           if (input.files && input.files[0]) {
               var reader = new FileReader();
                 reader.onload = function (e) {
                   $('#user_pic')
                       .attr('src', e.target.result);
               };

               reader.readAsDataURL(input.files[0]);
           }
       }

</script>
<style type="text/css">

  .msg-error{
        color: #e80b0b;
  }
  .error{
            color: #e80b0b;

  }
</style>
